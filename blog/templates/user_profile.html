<!-- blog/user_profile.html -->
<h1>{{ user.username }}的个人主页</h1>
<p>邮箱：{{ user.email }}</p>
<p>角色：{{ user.role }}</p>

<p>关注：<a href="{% url 'blog:follower_list' user_id=user.id %}">{{ followers.count}}</a></p>
<p>粉丝：<a href="{% url 'blog:following_list' user_id=user.id %}">{{following.count }}</a></p>
<!-- 显示用户发表的文章 -->
<h2>发表的文章：</h2>
{% if posts %}
    <ul>
        {% for post in posts %}
            <li><a href="{% url 'blog:post_detail' post_id=post.id %}">{{ post.title }}</a></li>
        {% endfor %}
    </ul>
{% else %}
    <p>还没有发表文章</p>
{% endif %}

<!-- 关注和取消关注按钮 -->
{% if request.user != user %}
    {% if request.user in user.get_followers.all %}
        <form method="post" action="{% url 'blog:follow_user' user_id=user.id %}">
            {% csrf_token %}
            <button type="submit">取消关注</button>
        </form>
    {% else %}
        <form method="post" action="{% url 'blog:follow_user' user_id=user.id %}">
            {% csrf_token %}
            <button type="submit">关注</button>
        </form>
    {% endif %}
{% endif %}
